<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Circle Timers</title>
  <style>
    /* ===== CSS VARIABLES ===== */ 
    :root {
      --primary-bg: #191919;
      --secondary-bg: #1F1F1F;
      --hover-color: #323232;
      --outline-color: #323232;
      --accent-color: #87A9FF;
      --primary-text: #D4D4D4;
      --secondary-text: #8C8C8C;
      --radius: 8px;
      --warning-yellow: #FFD700;
      --danger-red: #FF4444;
    }

    /* ===== GLOBAL STYLES ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: var(--primary-bg);
      color: var(--primary-text);
      padding: 24px 16px;
      overflow-x: hidden;
      touch-action: manipulation;
    }

    /* ===== MAIN CONTAINER ===== */
    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* ===== HEADER CONTROLS ===== */
    .header-controls {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .header-controls button {
      position: relative;
      padding: 10px 16px;
      border-radius: var(--radius);
      background: var(--secondary-bg);
      color: var(--primary-text);
      border: 1px solid var(--outline-color);
      cursor: pointer;
      overflow: hidden;
      font-size: 14px;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .header-controls button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 75%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      transform: skewX(-25deg);
      transition: left 0.7s ease-in-out;
    }

    .header-controls button:hover::before {
      left: 125%;
    }

    .header-controls button:hover {
      background: var(--hover-color);
      border-color: var(--accent-color);
    }

    .header-controls button:active {
      transform: scale(0.95);
    }

    .header-controls button.reset-all {
      color: var(--warning-yellow);
    }

    .header-controls button.export {
      color: var(--accent-color);
    }

    .header-controls button.import {
      color: var(--accent-color);
    }

    /* Hidden file input */
    #import-file {
      display: none;
    }

    /* ===== TIMERS GRID ===== */
    .timers-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 16px;
    }

    /* ===== TIMER CARD ===== */
    .timer-card {
      background: var(--secondary-bg);
      border: 1px solid var(--outline-color);
      border-radius: var(--radius);
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      position: relative;
    }

    .timer-card:active {
      transform: scale(0.98);
    }

    /* ===== TIMER TITLE ===== */
    .timer-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--primary-text);
      margin-bottom: 12px;
      text-align: center;
      width: 100%;
      padding: 6px 8px;
      border-radius: 4px;
      background: transparent;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .timer-title:focus {
      outline: none;
      background: var(--hover-color);
      border-color: var(--accent-color);
    }

    /* ===== CIRCLE TIMER ===== */
    .circle-container {
      position: relative;
      width: 120px;
      height: 120px;
      margin-bottom: 12px;
      cursor: pointer;
      touch-action: manipulation;
    }

    .circle-container:active {
      transform: scale(0.95);
    }

    .progress-ring {
      transform: rotate(-90deg);
      width: 100%;
      height: 100%;
    }

    .ring-bg {
      fill: none;
      stroke: var(--hover-color);
      stroke-width: 8;
    }

    .ring-progress {
      fill: none;
      stroke: var(--accent-color);
      stroke-width: 8;
      stroke-linecap: round;
      transition: stroke 0.3s ease;
    }

    .time-display {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      font-weight: bold;
      color: var(--primary-text);
      user-select: none;
      pointer-events: none;
      font-variant-numeric: tabular-nums;
    }

    /* ===== STATE INDICATOR ===== */
    .state-indicator {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--secondary-text);
      transition: all 0.3s ease;
    }

    .state-indicator.running {
      background: #4CAF50;
      box-shadow: 0 0 8px #4CAF50;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* ===== TIMER CONTROLS ===== */
    .timer-controls {
      display: flex;
      gap: 8px;
      width: 100%;
      justify-content: center;
    }

    .timer-controls button {
      position: relative;
      width: 40px;
      height: 40px;
      padding: 0;
      background: var(--secondary-bg);
      border: 1px solid var(--outline-color);
      color: var(--primary-text);
      font-size: 18px;
      border-radius: var(--radius);
      cursor: pointer;
      overflow: hidden;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: manipulation;
    }

    .timer-controls button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 75%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      transform: skewX(-25deg);
      transition: left 0.7s ease-in-out;
    }

    .timer-controls button:active::before {
      left: 125%;
    }

    .timer-controls button:active {
      transform: scale(0.9);
    }

    .timer-controls button.edit-btn {
      color: var(--accent-color);
    }

    .timer-controls button.reset-btn {
      color: var(--accent-color);
    }

    .timer-controls button.delete-btn {
      color: var(--danger-red);
    }

    /* ===== ADD TIMER BUTTON ===== */
    .add-timer-btn {
      grid-column: 1 / -1;
      position: relative;
      background: var(--secondary-bg);
      border: 2px dashed var(--outline-color);
      color: var(--accent-color);
      font-size: 48px;
      border-radius: var(--radius);
      cursor: pointer;
      height: 100px;
      transition: all 0.3s ease;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: manipulation;
    }

    .add-timer-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 75%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      transform: skewX(-25deg);
      transition: left 0.7s ease-in-out;
    }

    .add-timer-btn:active::before {
      left: 125%;
    }

    .add-timer-btn:active {
      transform: scale(0.98);
      background: var(--hover-color);
      border-color: var(--accent-color);
    }

    /* ===== MOBILE TIME PICKER MODAL ===== */
    .time-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      backdrop-filter: blur(4px);
    }

    .time-modal.active {
      display: flex;
    }

    .time-modal-content {
      background: var(--secondary-bg);
      border: 1px solid var(--accent-color);
      border-radius: var(--radius);
      padding: 20px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    .time-modal-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      text-align: center;
      color: var(--primary-text);
    }

    .time-inputs {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      justify-content: center;
      align-items: center;
    }

    .time-input-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .time-input-label {
      font-size: 12px;
      color: var(--secondary-text);
      text-transform: uppercase;
    }

    .time-input {
      width: 70px;
      height: 60px;
      font-size: 24px;
      text-align: center;
      background: var(--primary-bg);
      color: var(--primary-text);
      border: 1px solid var(--outline-color);
      border-radius: var(--radius);
      outline: none;
      transition: border-color 0.2s ease;
      font-variant-numeric: tabular-nums;
      -moz-appearance: textfield;
    }

    .time-input::-webkit-outer-spin-button,
    .time-input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .time-input:focus {
      border-color: var(--accent-color);
    }

    .time-colon {
      font-size: 24px;
      color: var(--secondary-text);
      margin-top: 20px;
    }

    .time-modal-buttons {
      display: flex;
      gap: 12px;
    }

    .time-modal-buttons button {
      position: relative;
      flex: 1;
      padding: 14px;
      border-radius: var(--radius);
      background: var(--secondary-bg);
      color: var(--primary-text);
      border: 1px solid var(--outline-color);
      cursor: pointer;
      overflow: hidden;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .time-modal-buttons button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 75%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      transform: skewX(-25deg);
      transition: left 0.7s ease-in-out;
    }

    .time-modal-buttons button:active::before {
      left: 125%;
    }

    .time-modal-buttons button:active {
      transform: scale(0.95);
    }

    .time-modal-buttons .save-btn {
      color: var(--accent-color);
      border-color: var(--accent-color);
    }

    .time-modal-buttons .cancel-btn {
      color: var(--danger-red);
    }

    /* ===== MOBILE OPTIMIZATIONS ===== */
    @media (max-width: 480px) {
      body {
        padding: 16px 12px;
      }

      .timers-grid {
        gap: 12px;
      }

      .circle-container {
        width: 100px;
        height: 100px;
      }

      .time-display {
        font-size: 16px;
      }

      .timer-controls button {
        width: 36px;
        height: 36px;
        font-size: 16px;
      }

      .header-controls {
        gap: 6px;
      }

      .header-controls button {
        padding: 8px 12px;
        font-size: 12px;
      }
    }

    @media (max-width: 360px) {
      .timers-grid {
        grid-template-columns: 1fr;
      }

      .add-timer-btn {
        height: 80px;
      }
    }

    /* ===== ACCESSIBILITY ===== */
    button:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px rgba(135, 169, 255, 0.3);
    }

    /* ===== HIDDEN AUDIO ===== */
    audio {
      display: none;
    }
  </style>
</head>
<body>
  <!-- HEADER CONTROLS -->
  <div class="container">
    <div class="header-controls">
      <button class="reset-all" id="reset-all-btn" aria-label="Reset All Timers">⟲ Reset All</button>
      <button class="export" id="export-btn" aria-label="Export Timers">↓ Export</button>
      <button class="import" id="import-btn" aria-label="Import Timers">↑ Import</button>
      <input type="file" id="import-file" accept=".json" aria-label="Import File Input">
    </div>

    <!-- TIMERS GRID -->
    <div class="timers-grid" id="timers-grid">
      <!-- Timers will be added here dynamically -->
    </div>
  </div>

  <!-- TIME PICKER MODAL -->
  <div class="time-modal" id="time-modal">
    <div class="time-modal-content">
      <div class="time-modal-title">Set Timer Duration</div>
      <div class="time-inputs">
        <div class="time-input-group">
          <label class="time-input-label">Hours</label>
          <input type="number" class="time-input" id="hours-input" min="0" max="23" value="0">
        </div>
        <span class="time-colon">:</span>
        <div class="time-input-group">
          <label class="time-input-label">Minutes</label>
          <input type="number" class="time-input" id="minutes-input" min="0" max="59" value="5">
        </div>
        <span class="time-colon">:</span>
        <div class="time-input-group">
          <label class="time-input-label">Seconds</label>
          <input type="number" class="time-input" id="seconds-input" min="0" max="59" value="0">
        </div>
      </div>
      <div class="time-modal-buttons">
        <button class="save-btn" id="modal-save-btn">✓ Save</button>
        <button class="cancel-btn" id="modal-cancel-btn">✕ Cancel</button>
      </div>
    </div>
  </div>

  <!-- ALARM SOUND -->
  <audio id="alarm-sound" preload="auto">
    <source src="https://contactherovibes.wordpress.com/wp-content/uploads/2025/06/new-notification-09-352705.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ===== TIMER STATE MANAGEMENT =====
    let timers = [];
    let currentEditingId = null;
    const STORAGE_KEY = 'circle-timers-data';

    // ===== DOM ELEMENTS =====
    const timersGrid = document.getElementById('timers-grid');
    const timeModal = document.getElementById('time-modal');
    const hoursInput = document.getElementById('hours-input');
    const minutesInput = document.getElementById('minutes-input');
    const secondsInput = document.getElementById('seconds-input');
    const modalSaveBtn = document.getElementById('modal-save-btn');
    const modalCancelBtn = document.getElementById('modal-cancel-btn');
    const resetAllBtn = document.getElementById('reset-all-btn');
    const exportBtn = document.getElementById('export-btn');
    const importBtn = document.getElementById('import-btn');
    const importFile = document.getElementById('import-file');
    const alarmSound = document.getElementById('alarm-sound');

    // ===== UTILITY FUNCTIONS =====
    function generateId() {
      return Date.now().toString(36) + Math.random().toString(36).substr(2);
    }

    function formatTime(totalSeconds) {
      const hrs = Math.floor(totalSeconds / 3600);
      const mins = Math.floor((totalSeconds % 3600) / 60);
      const secs = totalSeconds % 60;
      
      if (hrs > 0) {
        return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      }
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function getRingColor(percentage) {
      if (percentage > 0.5) {
        return '#87A9FF'; // Accent color
      } else if (percentage > 0.2) {
        return '#FFD700'; // Warning yellow
      } else {
        return '#FF4444'; // Danger red
      }
    }

    // ===== LOCAL STORAGE FUNCTIONS =====
    function saveToStorage() {
      const data = timers.map(t => ({
        id: t.id,
        label: t.label,
        duration: t.duration,
        remaining: t.remaining,
        isRunning: t.isRunning
      }));
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function loadFromStorage() {
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        try {
          return JSON.parse(data);
        } catch (e) {
          console.error('Failed to parse stored data:', e);
          return null;
        }
      }
      return null;
    }

    // ===== TIMER CLASS =====
    class Timer {
      constructor(id, label, duration, remaining = null, isRunning = false) {
        this.id = id;
        this.label = label;
        this.duration = duration; // in seconds
        this.remaining = remaining !== null ? remaining : duration;
        this.isRunning = isRunning;
        this.interval = null;
        this.element = null;
        this.ringElement = null;
        this.displayElement = null;
        this.stateIndicator = null;
        
        this.createUI();
        if (this.isRunning) {
          this.start();
        }
      }

      createUI() {
        // TIMER CARD
        const card = document.createElement('div');
        card.className = 'timer-card';
        card.innerHTML = `
          <div class="state-indicator"></div>
          <input type="text" class="timer-title" value="${this.label}" maxlength="30">
          <div class="circle-container">
            <svg class="progress-ring" viewBox="0 0 120 120">
              <circle class="ring-bg" cx="60" cy="60" r="54"></circle>
              <circle class="ring-progress" cx="60" cy="60" r="54"></circle>
            </svg>
            <div class="time-display">${formatTime(this.remaining)}</div>
          </div>
          <div class="timer-controls">
            <button class="edit-btn" aria-label="Edit Timer">⚙</button>
            <button class="reset-btn" aria-label="Reset Timer">↻</button>
            <button class="delete-btn" aria-label="Delete Timer">✕</button>
          </div>
        `;

        this.element = card;
        this.ringElement = card.querySelector('.ring-progress');
        this.displayElement = card.querySelector('.time-display');
        this.stateIndicator = card.querySelector('.state-indicator');
        
        // Calculate ring properties
        const radius = 54;
        const circumference = 2 * Math.PI * radius;
        this.ringElement.style.strokeDasharray = circumference;
        
        this.updateRing();
        
        // EVENT LISTENERS
        const titleInput = card.querySelector('.timer-title');
        titleInput.addEventListener('blur', () => {
          this.label = titleInput.value.trim() || 'Timer';
          titleInput.value = this.label;
          saveToStorage();
        });
        
        titleInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            titleInput.blur();
          }
        });

        // Circle click to start/pause
        card.querySelector('.circle-container').addEventListener('click', () => {
          if (this.isRunning) {
            this.pause();
          } else {
            this.start();
          }
        });

        // Edit button
        card.querySelector('.edit-btn').addEventListener('click', () => {
          this.openEditModal();
        });

        // Reset button
        card.querySelector('.reset-btn').addEventListener('click', () => {
          this.reset();
        });

        // Delete button
        card.querySelector('.delete-btn').addEventListener('click', () => {
          this.delete();
        });
      }

      updateDisplay() {
        this.displayElement.textContent = formatTime(this.remaining);
      }

      updateRing() {
        const radius = 54;
        const circumference = 2 * Math.PI * radius;
        const progress = this.remaining / this.duration;
        const offset = circumference - (progress * circumference);
        
        this.ringElement.style.strokeDashoffset = offset;
        this.ringElement.style.stroke = getRingColor(progress);
      }

      tick() {
        if (this.remaining > 0) {
          this.remaining--;
          this.updateDisplay();
          this.updateRing();
          saveToStorage();
        } else {
          this.complete();
        }
      }

      start() {
        if (!this.isRunning && this.remaining > 0) {
          this.isRunning = true;
          this.stateIndicator.classList.add('running');
          this.interval = setInterval(() => this.tick(), 1000);
          saveToStorage();
        }
      }

      pause() {
        if (this.isRunning) {
          this.isRunning = false;
          this.stateIndicator.classList.remove('running');
          clearInterval(this.interval);
          this.interval = null;
          saveToStorage();
        }
      }

      reset() {
        this.pause();
        this.remaining = this.duration;
        this.updateDisplay();
        this.updateRing();
        saveToStorage();
      }

      complete() {
        this.pause();
        this.remaining = 0;
        this.updateDisplay();
        this.updateRing();
        
        // Play alarm sound
        alarmSound.play().catch(e => console.log('Audio play failed:', e));
        
        // Vibrate on mobile if supported
        if ('vibrate' in navigator) {
          navigator.vibrate([200, 100, 200]);
        }
        
        saveToStorage();
      }

      openEditModal() {
        currentEditingId = this.id;
        
        const hrs = Math.floor(this.duration / 3600);
        const mins = Math.floor((this.duration % 3600) / 60);
        const secs = this.duration % 60;
        
        hoursInput.value = hrs;
        minutesInput.value = mins;
        secondsInput.value = secs;
        
        timeModal.classList.add('active');
        setTimeout(() => hoursInput.focus(), 100);
        scheduleHeightCheck();
      }

      updateDuration(newDuration) {
        this.duration = newDuration;
        this.remaining = newDuration;
        this.pause();
        this.updateDisplay();
        this.updateRing();
        saveToStorage();
      }

      delete() {
        this.pause();
        this.element.remove();
        timers = timers.filter(t => t.id !== this.id);
        renderGrid();
        saveToStorage();
        scheduleHeightCheck();
      }
    }

    // ===== GRID RENDERING =====
    function renderGrid() {
      // Clear grid
      timersGrid.innerHTML = '';
      
      // Add all timer elements
      timers.forEach(timer => {
        timersGrid.appendChild(timer.element);
      });
      
      // Add "Add Timer" button
      const addBtn = document.createElement('button');
      addBtn.className = 'add-timer-btn';
      addBtn.textContent = '+';
      addBtn.setAttribute('aria-label', 'Add New Timer');
      addBtn.addEventListener('click', addNewTimer);
      timersGrid.appendChild(addBtn);
      
      scheduleHeightCheck();
    }

    // ===== ADD NEW TIMER =====
    function addNewTimer() {
      const id = generateId();
      const timer = new Timer(id, `Timer ${timers.length + 1}`, 300); // Default 5 minutes
      timers.push(timer);
      renderGrid();
      saveToStorage();
    }

    // ===== MODAL CONTROLS =====
    modalSaveBtn.addEventListener('click', () => {
      const hrs = parseInt(hoursInput.value) || 0;
      const mins = parseInt(minutesInput.value) || 0;
      const secs = parseInt(secondsInput.value) || 0;
      
      const totalSeconds = hrs * 3600 + mins * 60 + secs;
      
      if (totalSeconds > 0 && currentEditingId) {
        const timer = timers.find(t => t.id === currentEditingId);
        if (timer) {
          timer.updateDuration(totalSeconds);
        }
      }
      
      timeModal.classList.remove('active');
      currentEditingId = null;
      scheduleHeightCheck();
    });

    modalCancelBtn.addEventListener('click', () => {
      timeModal.classList.remove('active');
      currentEditingId = null;
      scheduleHeightCheck();
    });

    // Close modal on backdrop click
    timeModal.addEventListener('click', (e) => {
      if (e.target === timeModal) {
        timeModal.classList.remove('active');
        currentEditingId = null;
        scheduleHeightCheck();
      }
    });

    // Close modal on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && timeModal.classList.contains('active')) {
        timeModal.classList.remove('active');
        currentEditingId = null;
        scheduleHeightCheck();
      }
    });

    // ===== HEADER CONTROLS =====
    resetAllBtn.addEventListener('click', () => {
      if (confirm('Reset all timers to their original duration?')) {
        timers.forEach(timer => timer.reset());
      }
    });

    exportBtn.addEventListener('click', () => {
      const data = timers.map(t => ({
        label: t.label,
        duration: t.duration
      }));
      
      const json = JSON.stringify(data, null, 2);
      const blob = new Blob([json], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      
      const a = document.createElement('a');
      a.href = url;
      a.download = `circle-timers-${Date.now()}.json`;
      a.click();
      
      URL.revokeObjectURL(url);
    });

    importBtn.addEventListener('click', () => {
      importFile.click();
    });

    importFile.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (event) => {
        try {
          const data = JSON.parse(event.target.result);
          
          if (Array.isArray(data)) {
            // Clear existing timers
            timers.forEach(t => t.pause());
            timers = [];
            
            // Create new timers from imported data
            data.forEach(item => {
              if (item.label && item.duration) {
                const id = generateId();
                const timer = new Timer(id, item.label, item.duration);
                timers.push(timer);
              }
            });
            
            renderGrid();
            saveToStorage();
          }
        } catch (error) {
          alert('Invalid JSON file. Please check the file format.');
          console.error('Import error:', error);
        }
      };
      
      reader.readAsText(file);
      importFile.value = ''; // Reset input
    });

    // ===== INITIALIZATION =====
    function initialize() {
      const savedData = loadFromStorage();
      
      if (savedData && savedData.length > 0) {
        // Load from storage
        savedData.forEach(data => {
          const timer = new Timer(
            data.id,
            data.label,
            data.duration,
            data.remaining,
            false // Don't auto-start on page load
          );
          timers.push(timer);
        });
      } else {
        // Create default timers
        const defaultTimers = [
          { label: '5min Timer', duration: 300 },
          { label: '10min Timer', duration: 600 },
          { label: '30min Timer', duration: 1800 },
          { label: '1hr Timer', duration: 3600 }
        ];
        
        defaultTimers.forEach(data => {
          const id = generateId();
          const timer = new Timer(id, data.label, data.duration);
          timers.push(timer);
        });
        
        saveToStorage();
      }
      
      renderGrid();
    }

    // ===== FOURTHWALL SCROLLBAR FIX =====
    let lastHeight = 0;
    let resizeTimer;

    function sendHeight() {
      const height = document.body.scrollHeight;
      
      if (height !== lastHeight) {
        lastHeight = height;
        window.parent.postMessage({ frameHeight: height }, '*');
      }
    }

    function scheduleHeightCheck() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(sendHeight, 150);
    }

    window.addEventListener('load', () => {
      setTimeout(sendHeight, 100);
    });

    window.addEventListener('resize', () => {
      scheduleHeightCheck();
    });
    
    // ===== END OF SCROLLBAR FIX =====

    // Start the app
    initialize();
  </script>
</body>
</html>
