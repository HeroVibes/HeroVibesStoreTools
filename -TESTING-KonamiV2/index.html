<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <style>
    :root {
      --primary-bg: #191919;
      --secondary-bg: #1F1F1F;
      --hover-bg: #323232;
      --outline-color: #323232;
      --accent-color: #87A9FF;
      --primary-text: #D4D4D4;
      --secondary-text: #8C8C8C;
      --font-family: sans-serif;
      --header-font-size: 20px;
      --title-font-size: 14px;
      --text-font-size: 12px;
      --default-padding: 24px 16px;
      --card-outline: 1px;
      --radius: 8px;
    }

    /* Nuclear iframe reset â€“ no more cutoff drama */
    *, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
    html, body { height: auto !important; min-height: 100% !important; width: 100%; overflow: visible; }

    body {
      font-family: var(--font-family);
      color: var(--primary-text);
      background: linear-gradient(135deg, #191919, #1F1F1F);
      animation: gradientShift 10s ease infinite;
      background-size: 200% 200%;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 16px 60px;
      transition: background 1s ease;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      background: var(--secondary-bg);
      border: var(--card-outline) solid var(--outline-color);
      border-radius: var(--radius);
      padding: var(--default-padding);
      max-width: 420px;
      width: 100%;
      text-align: center;
      transition: all 0.5s ease;
      position: relative;
      z-index: 1;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .hidden {
      opacity: 0;
      transform: translateY(20px);
      pointer-events: none;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) translateY(20px);
      width: 100%;
      max-width: 420px;
    }

    input[type="text"] {
      background: var(--primary-bg);
      border: 1px solid var(--outline-color);
      color: var(--primary-text);
      padding: 12px 14px;
      border-radius: var(--radius);
      width: 100%;
      font-size: var(--title-font-size);
      margin: 16px 0 20px;
      transition: border 0.3s;
    }

    input[type="text"]:focus {
      border-color: var(--accent-color);
      outline: none;
    }

    .btn {
      position: relative;
      padding: 12px 20px;
      border-radius: var(--radius);
      background: var(--secondary-bg);
      color: var(--primary-text);
      border: 1px solid rgba(255,255,255,0.06);
      cursor: pointer;
      overflow: hidden;
      font-size: var(--title-font-size);
      min-width: 110px;
      font-weight: 500;
    }

    .btn:hover { background: var(--hover-bg); }
    .btn::before {
      content: '';
      position: absolute;
      top: 0; left: -100%; width: 75%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      transform: skewX(-25deg);
      transition: left .7s ease-in-out;
    }
    .btn:hover::before { left: 125%; }
    .btn:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(135,169,255,0.12); }

    .gif-container {
      position: relative;
      margin: 24px auto;
      max-width: 320px;
      cursor: pointer;
      border-radius: var(--radius);
      overflow: hidden;
    }

    .gif-container img {
      width: 100%;
      display: block;
      border-radius: var(--radius);
    }

    .input-behind {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 88%;
      opacity: 0;
      transition: opacity 0.5s;
      pointer-events: none;
      background: rgba(31,31,31,0.92);
      padding: 16px;
      border-radius: var(--radius);
      backdrop-filter: blur(4px);
    }

    .gif-container.active .input-behind {
      opacity: 1;
      pointer-events: auto;
    }

    .version {
      position: absolute;
      bottom: 12px;
      right: 16px;
      font-size: var(--text-font-size);
      color: var(--secondary-text);
      opacity: 0.7;
      font-family: monospace;
    }

    #cloak-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: var(--primary-bg);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--accent-color);
      font-size: 19px;
      text-align: center;
      padding: 30px;
      font-weight: bold;
      display: none;
    }

    @media (max-width: 480px) {
      body { padding: 20px 12px 50px; }
      .container { padding: 20px 14px; }
      .version { font-size: 10px; bottom: 8px; right: 10px; }
    }
  </style>
</head>
<body>
  <div id="cloak-overlay">GitHub direct access? Denied. Play the game, hero. ðŸŽ®</div>

  <div id="step1" class="container">
    <p style="font-size:var(--header-font-size);font-weight:bold;margin-bottom:16px;line-height:1.3;">
      Quick Quiz: What is the next number in the sequence 2, 3, 5, 7, 11?
    </p>
    <input type="text" id="quiz-answer" placeholder="Enter your answer">
    <button class="btn" onclick="checkQuiz()">Submit</button>
  </div>

  <div id="step2" class="container hidden">
    <p style="font-size:var(--title-font-size);margin-bottom:16px;font-weight:500;">Hint: Hero</p>
    <div class="gif-container" onclick="revealInput()">
      <img src="https://via.placeholder.com/320x200/1F1F1F/87A9FF?text=STEGO+GIF" alt="Hidden Message">
      <div class="input-behind">
        <input type="text" id="password-input" placeholder="Decoded password">
        <button class="btn" onclick="checkPassword()" style="margin-top:12px;width:100%;">Unlock</button>
      </div>
    </div>
  </div>

  <div id="step3" class="container hidden">
    <p style="font-size:var(--header-font-size);font-weight:bold;margin-bottom:12px;">
      Steam Key (Encrypted)
    </p>
    <p id="encrypted-key" style="font-size:var(--title-font-size);word-break:break-all;background:var(--primary-bg);padding:12px;border-radius:var(--radius);margin:16px 0;">
      U2FtcGxlRW5jcnlwdGVkS2V5MTIzNDU=
    </p>
    <p style="font-size:var(--text-font-size);color:var(--secondary-text);">
      Use <strong>Base64 Decoder</strong> tool â†’ Paste â†’ Copy result â†’ Redeem on Steam.
    </p>
  </div>

  <div class="version">V1.0.3</div>

  <form id="second-notification-form" action="https://formspree.io/f/xkgznjpd" method="POST" style="display:none;">
    <input type="text" name="Claim_Confirmation" value="Steam key claimed!">
  </form>

  <script>
    // === BUG TEST ANSWERS (ROB ONLY) ===
    // 1. Quiz: 13
    // 2. Password: konamihero
    // 3. Base64: U2FtcGxlRW5jcnlwdGVkS2V5MTIzNDU= â†’ SampleEncryptedKey12345

    const _0x1a=['top','self','parent','frameElement','cloak-overlay','style','display','block','none','checkQuiz','quiz-answer','value','trim','toLowerCase','13','Wrong! Next prime is 13. Try again. ðŸ§®','transitionToStep','revealInput','gif-container','classList','add','active','checkPassword','password-input','konamihero','second-notification-form','submit','Nope. Use "Hero" + stego tool. ðŸ”','step','hidden','remove','body','background','linear-gradient(135deg, #1F1F1F, #323232)','scheduleHeightCheck','sendHeight','scrollHeight','lastHeight','parent','postMessage','frameHeight','*'];

    (function cloak() {
      try {
        if (window[_0x1a[0]] !== window || window[_0x1a[1]] !== window[_0x1a[0]] || window[_0x1a[2]] !== window[_0x1a[1]] || window[_0x1a[3]]) {
          if (location.href.includes('github.io')) {
            document.getElementById(_0x1a[4])[_0x1a[5]][_0x1a[6]] = _0x1a[7];
          }
          return;
        }
        document.getElementById(_0x1a[4])[_0x1a[5]][_0x1a[6]] = _0x1a[8];
      } catch(e) {}
    })();

    function checkQuiz() {
      try {
        const a = document.getElementById(_0x1a[10])[_0x1a[11]].trim().toLowerCase();
        if (a === _0x1a[14]) { transitionToStep(2); }
        else { alert(_0x1a[15]); }
      } catch(e) { console.error(e); }
    }

    function revealInput() {
      try { document.querySelector('.' + _0x1a[18]).classList.add(_0x1a[20]); }
      catch(e) { console.error(e); }
    }

    function checkPassword() {
      try {
        const p = document.getElementById(_0x1a[22])[_0x1a[11]].trim().toLowerCase();
        if (p === _0x1a[23]) { 
          transitionToStep(3); 
          setTimeout(() => document.getElementById(_0x1a[24]).submit(), 400);
        } else { alert(_0x1a[25]); }
      } catch(e) { console.error(e); }
    }

    function transitionToStep(s) {
      try {
        const c = document.getElementById('step' + (s-1));
        const n = document.getElementById('step' + s);
        if (c && n) {
          c.classList.add(_0x1a[26]);
          setTimeout(() => {
            document.body.style.background = _0x1a[28];
            n.classList.remove(_0x1a[26]);
            scheduleHeightCheck();
          }, 550);
        }
      } catch(e) { console.error(e); }
    }

    // Iframe height â€” now *actually* works
    let lastHeight = 0, resizeTimer;
    function sendHeight() {
      if (window.parent === window) return;
      const h = document.documentElement.scrollHeight || document.body.scrollHeight;
      if (h !== lastHeight && h > 0) {
        lastHeight = h;
        window.parent.postMessage({frameHeight: h + 20}, '*'); // +20 buffer
      }
    }
    function scheduleHeightCheck() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(sendHeight, 100);
    }

    // Trigger on load, resize, and DOM changes
    window.addEventListener('load', () => {
      setTimeout(() => {
        sendHeight();
        setTimeout(sendHeight, 300); // double-tap
      }, 150);
    });
    window.addEventListener('resize', scheduleHeightCheck);
    new MutationObserver(scheduleHeightCheck).observe(document.body, { childList: true, subtree: true });

    // Anti-cheat
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if ([123, 85].includes(e.keyCode) || (e.ctrlKey && e.shiftKey && e.keyCode === 73)) {
        e.preventDefault();
        alert('Dev tools? In *my* Konami page? Bold. ðŸ˜¤');
      }
    });
    setInterval(() => { debugger; }, 150);

    console.log('V1.0.3: Iframe FIXED. No cutoff. Centered. Cloaked. Unbreakable. ðŸ’ª');
  </script>
</body>
</html>
